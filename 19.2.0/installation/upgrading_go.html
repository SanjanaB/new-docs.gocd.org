<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upgrading GoCD | GoCD User Documentation</title>

<meta name="description" content="To upgrade from a previous version of GoCD, it is only necessary to upgrade the Server. Agents will automatically update to the correct version of GoCD."/>
<meta name="keywords" content="[upgrade gocd, gocd server upgrade, configuration backup, database backup, build artifacts,]"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//installation/upgrading_go.html"/>
<script async src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link rel="stylesheet" href="../normalize.min.css"/>

<link rel="stylesheet" href="../book.min.3ebd28c907bab09ffb3238a8742a29b1191cc675d635ee7fb6f3fa4d7f9d4ed2.css"/>
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<a href="https://www.gocd.org"> <img src="../svg/product_ui_logo_go.svg" class="icon" /></a>


    <ul>
<li><a href="../"><strong>Introduction</strong></a></li>
<li><a href="../introduction.html"><strong>Concepts In GoCD</strong></a>

<ul>
<li><a href="../introduction/concepts_in_go.html">Concepts In GoCD</a></li>
</ul></li>
<li><a href="../navigation.html"><strong>GoCD Tour</strong></a>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>
<li><a href="../installation.html"><strong>Installing GoCD</strong></a>

<ul>
<li><a href="../installation/system_requirements.html">System requirements</a></li>
<li><a href="../installation/installing_go_server.html">Installing GoCD Server</a>

<ul>
<li><a href="../installation/install/server/linux.html">Linux</a></li>
<li><a href="../installation/install/server/windows.html">Windows</a></li>
<li><a href="../installation/install/server/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/server/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/installing_go_agent.html">Installing GoCD Agent</a>

<ul>
<li><a href="../installation/install/agent/linux.html">Linux</a></li>
<li><a href="../installation/install/agent/windows.html">Windows</a></li>
<li><a href="../installation/install/agent/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/agent/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/upgrading_go.html">Upgrading GoCD</a></li>
<li><a href="../installation/configuring_server_details.html">Configuring Server Details</a></li>
<li><a href="../installation/configure-reverse-proxy.html">Configure a Reverse Proxy</a></li>
<li><a href="../installation/configure-agent-proxy.html">Configure an agent with proxy</a></li>
<li><a href="../installation/ssl_tls_config.html">Configuring SSL/TLS</a>

<ul>
<li><a href="../installation/ssl_tls/setting_up_ciphers.html">Customizing Ciphers</a></li>
<li><a href="../installation/ssl_tls/custom_server_certificate.html">Change SSL Certificates</a></li>
<li><a href="../installation/ssl_tls/end_to_end_transport_security.html">End to end transport security</a></li>
<li><a href="../installation/ssl_tls/configuring_hsts_header.html">Configuring HSTS Header</a></li>
</ul></li>
<li><a href="../installation/performance_tuning.html">Performance Tuning</a></li>
<li><a href="../installation/hardware_specifications.html">Hardware Specifications</a></li>
<li><a href="../installation/troubleshooting.html">Troubleshooting</a></li>
</ul></li>
<li><a href="../configuration.html"><strong>Configuration</strong></a>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>
<li><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>
<li><a href="../integration.html"><strong>Integrating GoCD With Other Tools</strong></a><br /></li>
<li><a href="../extension_points.html"><strong>Extension Points Of GoCD</strong></a>

<ul>
<li><a href="../extension_points/plugin_user_guide.html">Plugin User Guide</a></li>
<li><a href="../extension_points/package_repository_extension.html">Package Repository Extension</a></li>
<li><a href="../extension_points/yum_repository_poller.html">Yum Repository Poller</a></li>
<li><a href="../extension_points/scm_extension.html">SCM Extension</a></li>
<li><a href="../extension_points/task_extension.html">Task Extension</a></li>
<li><a href="../extension_points/notification_extension.html">Notification Extension</a></li>
<li><a href="../extension_points/configrepo_extension.html">Configuration repository Extension</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes.html"><strong>GoCD on Kubernetes</strong></a>

<ul>
<li><a href="../gocd_on_kubernetes/introduction.html">Introduction</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup_and_configuration.html">Setup and configuration</a>

<ul>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup.html">Setup</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_cluster.html">Configure your Kubernetes Cluster</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/helm_install.html">Install the GoCD Helm chart</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline.html">Designing a CD Pipeline</a>

<ul>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_build_pipeline.html">Create a pipeline to build application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_test_pipeline.html">Create a pipeline to test the built application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_deploy_pipeline.html">Create a pipeline to deploy on Kubernetes</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/docker_workflows.html">Docker workflows</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_k8s_ea_plugin.html">Configure the Kubernetes Elastic Agent plugin</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/troubleshooting.html">Troubleshooting</a></li>
</ul></li>
<li><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>
<li><a href="../beta.html"><strong>Beta features</strong></a>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>
<li><a href="../release_history.html"><strong>Release History</strong></a>

<ul>
<li><a href="../release_history/whats_new_in_go.html">What&rsquo;s New in Go</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Upgrading GoCD</strong>
</header>

      
<article class="markdown">

<h1 id="upgrading-gocd">Upgrading GoCD</h1>

<p>To upgrade from a previous version of GoCD, it is only necessary to upgrade the Server. It is not necessary to stop or backup the GoCD Agents. Agents will automatically update to the correct version of GoCD.</p>

<h3 id="before-you-start">Before you start</h3>

<p>Since Cruise 1.1 (legacy version of GoCD), we do not include a bundled version of the Subversion version control system. This means that if you use Subversion for your projects the server and all agents need to have Subversion installed and available on the system path.</p>

<p>Since Cruise 1.2 (legacy version of Go), we do not include a bundled version of <code>ant</code>. This means that if you use <code>ant</code> for your projects the server and all agents need to have <code>ant</code> installed and available on the system path.</p>

<h3 id="backing-up-your-data">Backing up your data</h3>

<h4 id="configuration-backup">Configuration Backup</h4>

<p>As part of the configuration two files need to be backed up:</p>

<ul>
<li>GoCD&rsquo;s configuration is saved in the <code>cruise-config.xml</code> file</li>
<li>Cipher file for password encryption.</li>
</ul>

<p>Based on the OS your GoCD server is running on, both these files can be found at:</p>

<table>
<thead>
<tr>
<th align="left">Operating System</th>
<th align="left">Location</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Linux</td>
<td align="left"><code>/etc/go</code></td>
</tr>

<tr>
<td align="left">Windows</td>
<td align="left"><code>[Go install directory]\config</code></td>
</tr>

<tr>
<td align="left">Mac OS X</td>
<td align="left"><code>~/Library/Application Support/Go Server</code></td>
</tr>
</tbody>
</table>

<h4 id="database-backup">Database backup</h4>

<p>It is critical that the Go server be stopped before taking a backup of the database. If the GoCD server is not stopped, the backup may be corrupted. The database directory will be located at any one of the following locations based on what OS you&rsquo;re running on:</p>

<table>
<thead>
<tr>
<th align="left">Operating System</th>
<th align="left">Location</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Linux</td>
<td align="left"><code>/var/lib/go-server/db</code></td>
</tr>

<tr>
<td align="left">Windows</td>
<td align="left"><code>[Go install directory]\db</code></td>
</tr>

<tr>
<td align="left">Mac OS X</td>
<td align="left"><code>~/Library/Application Support/Go Server/db</code></td>
</tr>
</tbody>
</table>

<h4 id="build-artifacts-backup">Build Artifacts Backup</h4>

<p>The GoCD server acts as a repository for all your build artifacts. While it is not essential to backup the artifacts before an upgrade, it is good practice to make regular backups of this directory.</p>

<p>You can configure where GoCD stores build artifacts. The following are the default locations of the artifacts if you have not customized its location:</p>

<table>
<thead>
<tr>
<th align="left">Operating System</th>
<th align="left">Location</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Linux</td>
<td align="left"><code>/var/lib/go-server/artifacts</code></td>
</tr>

<tr>
<td align="left">Windows</td>
<td align="left"><code>[Go install directory]\artifacts</code></td>
</tr>

<tr>
<td align="left">Mac OS X</td>
<td align="left"><code>~/Library/Application Support/Go Server/artifacts</code></td>
</tr>
</tbody>
</table>

<h3 id="upgrading-to-the-new-version">Upgrading to the new version</h3>

<p>You do not need to stop the Agents to perform an upgrade. GoCD agents will automatically update to the correct version of the software. You do not need to upgrade the GoCD agents. Any builds in progress will be rescheduled, and the existing pipelines will complete as expected.</p>

<p>If you are upgrading from a pre-2.1 release, the agent&rsquo;s directory structure will continue to be called &ldquo;cruise-agent&rdquo; and will not be renamed to &ldquo;go-agent&rdquo;. This is normal and will not cause any issues.</p>

<p>On linux, you can ignore any permission errors logged as part of the upgrade of the cruise agent from a pre-2.1 release</p>

<p>GoCD will perform upgrades of its internal data structures when it starts. This process may take some time for installations with a large number of historical builds (10 to 15 minutes on very large installations). If you suspect that there is a problem with the upgrade, check the go-server.log to see if there are any reported errors. This is a one-time migration and subsequent restarts will be much faster.</p>

<h4 id="windows">Windows</h4>

<p>Run the GoCD installer. Make sure that you specify the same directory as your previously installed version.</p>

<p>If you have changed the GoCD Server Windows service to run as a different user, you will need to repeat this configuration change.</p>

<p>The installer will automatically start the service. Once GoCD completes its internal data changes, you should be able to see the GoCD webpage. Any existing Agents should automatically reconnect. Any builds in progress should continue, or be rescheduled.</p>

<h4 id="linux">Linux</h4>

<h4 id="debian-based-distributions-i-e-ubuntu">Debian based distributions (i.e. Ubuntu)</h4>

<p>Run the GoCD installer as described</p>

<pre><code>sudo dpkg -i [go-server-package-name]
</code></pre>

<h4 id="rpm-based-distributions-i-e-redhat">RPM based distributions (i.e. RedHat)</h4>

<p>Run the GoCD installer as described</p>

<pre><code>sudo rpm -U [go-server-package-name]
</code></pre>

<h4 id="macintosh-osx">Macintosh OSX</h4>

<p>The Macintosh OSX edition of Go does not support upgrades. You should follow the steps above to backup your data, uninstall Go/Cruise (by dragging the application into trash), and then perform a fresh installation.</p>

<h3 id="notes">Notes</h3>

<p>Use the notes from this section when upgrading to a particular version of GoCD.</p>

<h4 id="version-2-3">Version 2.3</h4>

<p>As part of the 2.3 upgrade, the <code>dest</code> attribute of a material configured in a pipeline is case-insensitive. This would mean that if you have a pipeline P1 with two materials, say material M1 with <code>dest = &quot;foo&quot;</code> and material M2 with <code>dest = &quot;Foo&quot;</code>, after the upgrade the dest folders will be automatically changed to M1 <code>dest = &quot;foo_[random_string]&quot;</code> and M2 <code>dest = &quot;Foo_[random_string]&quot;</code></p>
</article>

      
<div class="align-center book-git-footer justify-end">
  
  
  <div>
    <a href="https://github.com/gocd/new-docs.gocd.org/edit/master/content/installation/upgrading_go.md" target="_blank" rel="noopener">
      <img src="../svg/code-fork.svg" /> Edit this page
    </a>
  </div>
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#upgrading-gocd">Upgrading GoCD</a>
<ul>
<li>
<ul>
<li><a href="#before-you-start">Before you start</a></li>
<li><a href="#backing-up-your-data">Backing up your data</a>
<ul>
<li><a href="#configuration-backup">Configuration Backup</a></li>
<li><a href="#database-backup">Database backup</a></li>
<li><a href="#build-artifacts-backup">Build Artifacts Backup</a></li>
</ul></li>
<li><a href="#upgrading-to-the-new-version">Upgrading to the new version</a>
<ul>
<li><a href="#windows">Windows</a></li>
<li><a href="#linux">Linux</a></li>
<li><a href="#debian-based-distributions-i-e-ubuntu">Debian based distributions (i.e. Ubuntu)</a></li>
<li><a href="#rpm-based-distributions-i-e-redhat">RPM based distributions (i.e. RedHat)</a></li>
<li><a href="#macintosh-osx">Macintosh OSX</a></li>
</ul></li>
<li><a href="#notes">Notes</a>
<ul>
<li><a href="#version-2-3">Version 2.3</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
