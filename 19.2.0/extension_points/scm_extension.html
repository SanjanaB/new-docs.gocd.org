<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SCM Extension | GoCD User Documentation</title>

<meta name="description" content="GoCD has built-in support for Git, Mercurial, SVN, TFS &amp; Perforce. Users can use SCM plugins to integrate with other SCMs."/>
<meta name="keywords" content="[source code materials, perforce, mercurial, git, tfs, team foundation, scm, build pipelines, cd pipeines, continuous delivery, xml configuration]"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//extension_points/scm_extension.html"/>
<script async src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet"/>
<link rel="stylesheet" href="../normalize.min.css"/>

<link rel="stylesheet" href="../book.min.87a2ae978f4eef197028ff1dc9c46e406d1b1133dcefddfe618d4d6d73fc362e.css"/>
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">



    <ul>
<li><a href="../"><strong>Introduction</strong></a></li>
<li><a href="../navigation.html"><strong>GoCD Tour</strong></a>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>
<li><a href="../configuration.html"><strong>Configuration</strong></a>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>
<li><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>
<li><a href="../extension_points.html"><strong>Extension Points Of GoCD</strong></a>

<ul>
<li><a href="../extension_points/plugin_user_guide.html">Plugin User Guide</a></li>
<li><a href="../extension_points/package_repository_extension.html">Package Repository Extension</a></li>
<li><a href="../extension_points/yum_repository_poller.html">Yum Repository Poller</a></li>
<li><a href="../extension_points/scm_extension.html">SCM Extension</a></li>
<li><a href="../extension_points/task_extension.html">Task Extension</a></li>
<li><a href="../extension_points/notification_extension.html">Notification Extension</a></li>
<li><a href="../extension_points/configrepo_extension.html">Configuration repository Extension</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes.html"><strong>GoCD on Kubernetes</strong></a>

<ul>
<li><a href="../gocd_on_kubernetes/introduction.html">Introduction</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup_and_configuration.html">Setup and configuration</a>

<ul>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup.html">Setup</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_cluster.html">Configure your Kubernetes Cluster</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/helm_install.html">Install the GoCD Helm chart</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline.html">Designing a CD Pipeline</a>

<ul>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_build_pipeline.html">Create a pipeline to build application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_test_pipeline.html">Create a pipeline to test the built application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_deploy_pipeline.html">Create a pipeline to deploy on Kubernetes</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/docker_workflows.html">Docker workflows</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_k8s_ea_plugin.html">Configure the Kubernetes Elastic Agent plugin</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/troubleshooting.html">Troubleshooting</a></li>
</ul></li>
<li><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>
<li><a href="../beta.html"><strong>Beta features</strong></a>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>
<li><a href="../release_history.html"><strong>Release History</strong></a>

<ul>
<li><a href="../release_history/whats_new_in_go.html">What&rsquo;s New in Go</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>SCM Extension</strong>
</header>

      
<article class="markdown">

<h1 id="scm-material">SCM Material</h1>

<h2 id="introduction">Introduction</h2>

<p>A build typically consumes source code maintained in a version control system (VCS/SCM). GoCD has built-in support for Git, Mercurial, SVN, TFS &amp; Perforce. Users can use SCM plugins to integrate with other SCMs.</p>

<h3 id="scms-and-materials">SCMs and Materials</h3>

<p>Unlike built-in VCS/SCM materials, the material definition in case of plugin SCMs is <em>not</em> contained within the pipeline definition. They are global entities. Many pipelines may have material definitions referring to the same SCM. When there is a new revision in the SCM, interested pipelines will get scheduled.</p>

<h4 id="scm-definition">SCM Definition</h4>

<p>A SCM material plugin lets pipeline group admins provide details of the corresponding SCM type to GoCD.</p>

<p><img src="../images/scm-select-material.png" alt="" /></p>

<p><img src="../images/scm-add-material.png" alt="" /></p>

<p><img src="../images/scm-errors.png" alt="" /></p>

<h5 id="note">Note:</h5>

<ol>
<li>The SCM name is not used by the SCM material plugin - it is used by Go to construct the material name. Two SCMs cannot have the same name.</li>
<li>Use the check connection button to ensure that Go can work with this SCM.</li>
<li>On &ldquo;Save&rdquo; plugin validates user inputs.</li>
</ol>

<p>Note: Currently to associate an existing SCM material to a pipeline you will need to edit the Config XML.</p>

<h4 id="scm-material-uniqueness-fingerprint">SCM material uniqueness (fingerprint):</h4>

<p>Each SCM material plugin defines a subset of its properties as a <em>SCM fingerprint</em>. e.g. SCM <code>url</code> and <code>branch</code> could be included while <code>username</code> and <code>password</code> could be excluded. SCM names are <strong>not</strong> part of SCM fingerprint. It is not permitted to multiple SCMs having the same SCM fingerprint. An attempt to do so will result in an error message like this:</p>

<pre><code>The following error(s) need to be resolved in order to perform this action:&lt;br&gt;
Cannot save SCM, found duplicate SCMs. [SCM Name: 'apple'], [SCM Name: 'orange']
</code></pre>

<h4 id="sample-xml-configuration">Sample XML Configuration</h4>

<p>Here is a XML view of an SCM. Note the relation between SCM and pipeline material. Loosely typed property, key and value tags are used for SCM configuration in order to accommodate different plugins. If you choose to configure via direct XML edit, note that it isn&rsquo;t necessary to provide SCM IDs, GoCD server wil auto-generate them. However, not all validations that are performed while configuring via UI kick in while configuring via XML edit - the resulting failures will show up later in the server health message panel at the bottom right of the browser frame.</p>

<pre><code class="language-xml">&lt;scms&gt;
  &lt;scm id=&quot;3bfc282e-43a6-4795-ba9c-6c50665220dd&quot; name=&quot;git-repo&quot;&gt;
    &lt;pluginConfiguration id=&quot;jgit&quot; version=&quot;1.0&quot; /&gt;
    &lt;configuration&gt;
      &lt;property&gt;
        &lt;key&gt;url&lt;/key&gt;
        &lt;value&gt;https://github.com/gocd/gocd.git&lt;/value&gt;
      &lt;/property&gt;
    &lt;/configuration&gt;
  &lt;/scm&gt;
&lt;/scms&gt;
...
&lt;pipelines group=&quot;sample-group&quot;&gt;
  &lt;pipeline name=&quot;upstream-pipeline&quot;&gt;
    &lt;materials&gt;
      &lt;scm ref=&quot;3bfc282e-43a6-4795-ba9c-6c50665220dd&quot; dest=&quot;dest&quot;&gt;
        &lt;filter&gt;
          &lt;ignore pattern=&quot;*.log&quot; /&gt;
        &lt;/filter&gt;
      &lt;/scm&gt;
    &lt;/materials&gt;
  ...
</code></pre>

<h3 id="permissions">Permissions</h3>

<p>Since SCMs are global entities changing a SCM definition will reflect on all pipelines that consume it - even those not in the same pipeline group as that of the person editing. To make the decision to &ldquo;edit&rdquo; / &ldquo;remove&rdquo; and &ldquo;add&rdquo; new material easier, we list all pipelines consuming the SCM.</p>

<p>Note: Change to the SCM definition causes all dependent pipelines to schedule.</p>

<p><img src="../images/scm-edit-material.png" alt="" /></p>

<h3 id="polling">Polling</h3>

<p>Even if no pipelines use a SCM, GoCD polls for newer revisions every minute. This may be turned off at a SCM level by setting <a href="../configuration/configuration_reference.html#scm"><code>autoUpdate</code></a> to false via the config xml (GoCD admins only). <code>autoUpdate</code> is turned on by default. When a newer revision is found for a SCM, the pipelines for which it is a material get scheduled (assuming <a href="../configuration/pipeline_scheduling.html">auto scheduling of pipelines</a> is on). Also see <a href="https://api.gocd.org/current/#scheduling-pipelines">API scheduling</a>.</p>

<p><em>Filters:</em> At times you may not want GoCD to trigger pipelines for every commit. e.g. you might not want to &lsquo;build&rsquo; if its a &lsquo;documentation&rsquo; change. You can setup a <a href="../configuration/configuration_reference.html#filter">filter</a> at pipeline level asking GoCD to skip pipeline scheduling if commit contains only files that match a pattern.</p>

<h3 id="scm-information-display">SCM information display</h3>

<p>The following information is expected from the SCM material plugin (which in turn obtains it from the SCM metadata if available)</p>

<ol>
<li>SCM revision</li>
<li>Commit time</li>
<li>Name of committer (if available)</li>
<li>Comment for the commit</li>
<li>Files in the commit along with action (added/modified/deleted)</li>
</ol>

<p>At the time of building the SCM, it is recommended to include as much of the above information as possible so that it is available for GoCD to display as below.</p>

<p><img src="../images/scm-revision-details.png" alt="" /></p>

<h3 id="scm-checkout-on-agent">SCM checkout on Agent</h3>

<p>VCS/SCM plugin will by default checkout code into <code>destination</code> directory on Agent before the job begins.</p>

<h2 id="references">References:</h2>

<ul>
<li><a href="https://developer.gocd.org/current/writing_go_plugins/scm_material/json_message_based_scm_material_extension.html">Developer docs</a></li>
<li><a href="https://www.gocd.org/community/plugins.html#scm-plugins-count">SCM Plugins</a></li>
<li><a href="https://github.com/gocd/gocd/issues/818">Github issue</a></li>
</ul>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#scm-material">SCM Material</a>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#scms-and-materials">SCMs and Materials</a>
<ul>
<li><a href="#scm-definition">SCM Definition</a>
<ul>
<li><a href="#note">Note:</a></li>
</ul></li>
<li><a href="#scm-material-uniqueness-fingerprint">SCM material uniqueness (fingerprint):</a></li>
<li><a href="#sample-xml-configuration">Sample XML Configuration</a></li>
</ul></li>
<li><a href="#permissions">Permissions</a></li>
<li><a href="#polling">Polling</a></li>
<li><a href="#scm-information-display">SCM information display</a></li>
<li><a href="#scm-checkout-on-agent">SCM checkout on Agent</a></li>
</ul></li>
<li><a href="#references">References:</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
