<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logging | GoCD User Documentation</title>

<meta name="description" content="GoCD is an open source continuous delivery server that helps organizations increase productivity and deliver high quality software through automation."/>
<meta name="keywords" content="continuous delivery, software, continuous integration, open source, blog, software development, tools, automation, deployment pipelines, devops, techniques"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//advanced_usage/logging.html"/>
<script src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link rel="stylesheet" href="../normalize.min.css"/>
<link rel="stylesheet" href="../stylesheets/website.css"/>

<link rel="stylesheet" href="../book.min.f2a0cdad2e0137fc7e70bc050b9c5d2798b5b4f45b50cfb8e342022c8cfd0732.css"/>
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<a href="https://www.gocd.org"> <img src="../svg/product_ui_logo_go.svg" class="icon" /></a>


    <ul>
<li><a href="../"><strong>Introduction</strong></a></li>
<li><a href="../introduction.html"><strong>Concepts In GoCD</strong></a>

<ul>
<li><a href="../introduction/concepts_in_go.html">Concepts In GoCD</a></li>
</ul></li>
<li><a href="../navigation.html"><strong>GoCD Tour</strong></a>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>
<li><a href="../installation.html"><strong>Installing GoCD</strong></a>

<ul>
<li><a href="../installation/system_requirements.html">System requirements</a></li>
<li><a href="../installation/installing_go_server.html">Installing GoCD Server</a>

<ul>
<li><a href="../installation/install/server/linux.html">Linux</a></li>
<li><a href="../installation/install/server/windows.html">Windows</a></li>
<li><a href="../installation/install/server/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/server/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/installing_go_agent.html">Installing GoCD Agent</a>

<ul>
<li><a href="../installation/install/agent/linux.html">Linux</a></li>
<li><a href="../installation/install/agent/windows.html">Windows</a></li>
<li><a href="../installation/install/agent/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/agent/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/upgrading_go.html">Upgrading GoCD</a></li>
<li><a href="../installation/configuring_server_details.html">Configuring Server Details</a></li>
<li><a href="../installation/configure-reverse-proxy.html">Configure a Reverse Proxy</a></li>
<li><a href="../installation/configure-agent-proxy.html">Configure an agent with proxy</a></li>
<li><a href="../installation/ssl_tls_config.html">Configuring SSL/TLS</a>

<ul>
<li><a href="../installation/ssl_tls/setting_up_ciphers.html">Customizing Ciphers</a></li>
<li><a href="../installation/ssl_tls/custom_server_certificate.html">Change SSL Certificates</a></li>
<li><a href="../installation/ssl_tls/end_to_end_transport_security.html">End to end transport security</a></li>
<li><a href="../installation/ssl_tls/configuring_hsts_header.html">Configuring HSTS Header</a></li>
</ul></li>
<li><a href="../installation/performance_tuning.html">Performance Tuning</a></li>
<li><a href="../installation/hardware_specifications.html">Hardware Specifications</a></li>
<li><a href="../installation/troubleshooting.html">Troubleshooting</a></li>
</ul></li>
<li><a href="../configuration.html"><strong>Configuration</strong></a>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>
<li><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>
<li><a href="../integration.html"><strong>Integrating GoCD With Other Tools</strong></a><br /></li>
<li><a href="../extension_points.html"><strong>Extension Points Of GoCD</strong></a>

<ul>
<li><a href="../extension_points/plugin_user_guide.html">Plugin User Guide</a></li>
<li><a href="../extension_points/package_repository_extension.html">Package Repository Extension</a></li>
<li><a href="../extension_points/yum_repository_poller.html">Yum Repository Poller</a></li>
<li><a href="../extension_points/scm_extension.html">SCM Extension</a></li>
<li><a href="../extension_points/task_extension.html">Task Extension</a></li>
<li><a href="../extension_points/notification_extension.html">Notification Extension</a></li>
<li><a href="../extension_points/configrepo_extension.html">Configuration repository Extension</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes.html"><strong>GoCD on Kubernetes</strong></a>

<ul>
<li><a href="../gocd_on_kubernetes/introduction.html">Introduction</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup_and_configuration.html">Setup and configuration</a>

<ul>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup.html">Setup</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_cluster.html">Configure your Kubernetes Cluster</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/helm_install.html">Install the GoCD Helm chart</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline.html">Designing a CD Pipeline</a>

<ul>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_build_pipeline.html">Create a pipeline to build application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_test_pipeline.html">Create a pipeline to test the built application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_deploy_pipeline.html">Create a pipeline to deploy on Kubernetes</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/docker_workflows.html">Docker workflows</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_k8s_ea_plugin.html">Configure the Kubernetes Elastic Agent plugin</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/troubleshooting.html">Troubleshooting</a></li>
</ul></li>
<li><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>
<li><a href="../beta.html"><strong>Beta features</strong></a>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>
<li><a href="../release_history.html"><strong>Release History</strong></a>

<ul>
<li><a href="../release_history/whats_new_in_go.html">What&rsquo;s New in Go</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Logging</strong>
</header>

      
<article class="markdown">

<h1 id="logging">Logging</h1>

<!-- toc -->

<h2 id="introduction">Introduction</h2>

<p>You can turn on additional logging to diagnose and troubleshoot issues with the GoCD server and agent.</p>

<h2 id="log-location">Log location</h2>

<p>To change where the GoCD server logs or GoCD agent logs are stored, use the system properties <code>gocd.server.log.dir</code> and <code>gocd.agent.log.dir</code> respectively.
Refer to the <a href="../advanced_usage/other_config_options.html#system-properties">system properties</a> documentation to find out how to set the system property on the gocd server or agent.</p>

<p>Note: The system property deals with configuring the log location for the GoCD server or agent related logs and not the plugin logs.</p>

<h2 id="gocd-server">GoCD Server</h2>

<p>To turn on additional logging on the GoCD server, you must:</p>

<ul>
<li>create/edit the file <code>CONFIG_DIR/logback-include.xml</code>. The config directory is typically <code>/etc/go</code> on Linux and <code>C:\Program Files\Go Server\config</code> on Windows. See the section <a href="#log-configuration-syntax">Log configuration syntax</a> for the log configuration syntax.</li>
</ul>

<p>The table below describes the various loggers that can be configured with the server:</p>

<table>
<thead>
<tr>
<th>Logger</th>
<th>Additivity</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>com.thoughtworks.go.server.Rails</code></td>
<td><code>true</code></td>
<td>This will enable debugging the rails application server.</td>
</tr>

<tr>
<td><code>com.thoughtworks.studios.shine</code></td>
<td><code>true</code></td>
<td>This will enable debugging of GoCD&rsquo;s test report analysis that is shown on the &ldquo;Tests&rdquo; tab of the stage details page on the server.</td>
</tr>

<tr>
<td><code>org.springframework</code></td>
<td><code>true</code></td>
<td>This will enable debugging of the spring framework.</td>
</tr>

<tr>
<td><code>org.apache.velocity</code></td>
<td><code>true</code></td>
<td>This will enable debugging of some of the server view templates.</td>
</tr>

<tr>
<td><code>org.eclipse.jetty.server.RequestLog</code></td>
<td><code>false</code></td>
<td>This will enable http request logging to help diagnose and identify slow page render times.</td>
</tr>

<tr>
<td><code>PerformanceLogger</code></td>
<td><code>false</code></td>
<td>This will output performance debug logs for 3 key background jobs: scheduling, material updates, work assignment. It is recommended that you send these logs to a different file using an appender.</td>
</tr>

<tr>
<td><code>com.microsoft.tfs.core</code></td>
<td><code>true</code></td>
<td>This will turn on debugging for the underlying Microsoft Team Foundation Server library used by GoCD.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.tfssdk14</code></td>
<td><code>true</code></td>
<td>This will turn on debugging for the GoCD wrapper around Microsoft TFS library.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.dependency</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>dependency</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.git</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>git</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.mercurial</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>mercurial</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.packagematerial</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>packagematerial</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.perforce</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>perforce</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.scm</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>scm</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.svn</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>svn</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.tfs</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>tfs</code>.</td>
</tr>
</tbody>
</table>

<h2 id="gocd-agent">GoCD Agent</h2>

<p>To turn on additional logging on the GoCD agent, you must:</p>

<ul>
<li>create/edit the file <code>CONFIG_DIR/agent-logback-include.xml</code>. The config directory is typically <code>/var/lib/go-agent/config</code> on Linux and <code>C:\Program Files\Go Agent\config</code> on Windows. See the section <a href="#log-configuration-syntax">Log configuration syntax</a> for the log configuration syntax.</li>
</ul>

<p>The table below describes the various loggers that can be configured with the server:</p>

<table>
<thead>
<tr>
<th>Logger</th>
<th>Additivity</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>org.springframework</code></td>
<td><code>true</code></td>
<td>This will enable debugging of the spring framework.</td>
</tr>

<tr>
<td><code>org.apache.http.wire</code></td>
<td><code>true</code></td>
<td>This will enable debugging of http connections between the agent and server.</td>
</tr>

<tr>
<td><code>com.microsoft.tfs.core</code></td>
<td><code>true</code></td>
<td>This will turn on debugging for the underlying Microsoft Team Foundation Server library used by GoCD.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.tfssdk14</code></td>
<td><code>true</code></td>
<td>This will turn on debugging for the GoCD wrapper around Microsoft TFS library.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.dependency</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>dependency</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.git</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>git</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.mercurial</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>mercurial</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.packagematerial</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>packagematerial</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.perforce</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>perforce</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.scm</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>scm</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.svn</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>svn</code>.</td>
</tr>

<tr>
<td><code>com.thoughtworks.go.domain.materials.tfs</code></td>
<td><code>true</code></td>
<td>Turn on logging for materials of type <code>tfs</code>.</td>
</tr>
</tbody>
</table>

<h2 id="log-configuration-syntax">Log configuration syntax</h2>

<p>To configure logging, you can specify the configuration below. You must tweak the <code>&lt;logger /&gt;</code> and optionally <code>&lt;appender /&gt;</code> to write to specific log files. You can read more about logback configuration in the <a href="https://logback.qos.ch/manual/configuration.html">logback configuration documentation</a>. This file will be reloaded every 5 seconds, so a restart of the GoCD server or agent is not necessary.</p>

<blockquote>
<p><strong>Note:</strong> It is recommended that you do not set the log level to <code>DEBUG</code> or <code>TRACE</code> for long periods of time since this can significantly affect performance.</p>
</blockquote>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!-- since this file is included in another file, use `&lt;included /&gt;` and not `&lt;configuration /&gt;`  --&gt;
&lt;included&gt;
  &lt;!-- send logs from `com.example.component-b` to the default log file (`go-agent.log` or `go-sever.log`) --&gt;
  &lt;logger name=&quot;com.example.component-b&quot; level=&quot;DEBUG&quot; /&gt;

  &lt;!--
    Uncomment the lines below to redirect specific logs to a file different from the default log file (`go-agent.log` or `go-sever.log`)
    The configuration below will:
      - rollover daily;
      - each log will will be at most 10MB, keep 10 days worth of history, but at most 512 MB
  --&gt;

  &lt;!--
  &lt;appender name=&quot;my-appender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
    &lt;file&gt;logs/example.log&lt;/file&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;%date{ISO8601} %-5level [%thread] %logger{0}:%line - %msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;

    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
      &lt;fileNamePattern&gt;logs/example.log.%d{yyyy-MM-dd}.%i.gz&lt;/fileNamePattern&gt;
      &lt;maxFileSize&gt;10 MB&lt;/maxFileSize&gt;
      &lt;maxHistory&gt;10&lt;/maxHistory&gt;
      &lt;totalSizeCap&gt;512 MB&lt;/totalSizeCap&gt;
    &lt;/rollingPolicy&gt;
  &lt;/appender&gt;

  &lt;logger name=&quot;com.example.component-a&quot; level=&quot;DEBUG&quot;&gt;
    &lt;appender-ref ref=&quot;my-appender&quot; /&gt;
  &lt;/logger&gt;
  --&gt;
&lt;/included&gt;
</code></pre>

<h2 id="example-enable-web-request-logs">Example: Enable web-request logs</h2>

<p>To turn on web request logs, add below content to logback-include.xml.</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;included&gt;

  &lt;appender name=&quot;web-request-appender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
    &lt;file&gt;logs/web-requests.log&lt;/file&gt;
    &lt;!-- Use `C:\Program Files\Go Server\logs\` on windows and `~/Library/Application Support/Go Server/logs/` on Mac OS for log directory path. --&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;%date{ISO8601} %-5level [%thread] %logger{0}:%line - %msg%n&lt;/pattern&gt;
    &lt;/encoder&gt;

    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
      &lt;fileNamePattern&gt;logs/web-requests.log.%d{yyyy-MM-dd}.%i.gz&lt;/fileNamePattern&gt;
      &lt;!-- Use `C:\Program Files\Go Server\logs\` on windows and `~/Library/Application Support/Go Server/logs/` on Mac OS for log directory path. --&gt;
      &lt;maxFileSize&gt;10 MB&lt;/maxFileSize&gt;
      &lt;maxHistory&gt;10&lt;/maxHistory&gt;
      &lt;totalSizeCap&gt;512 MB&lt;/totalSizeCap&gt;
    &lt;/rollingPolicy&gt;
  &lt;/appender&gt;

  &lt;logger name=&quot;org.eclipse.jetty.server.RequestLog&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;
    &lt;appender-ref ref=&quot;web-request-appender&quot; /&gt;
  &lt;/logger&gt;
&lt;/included&gt;
</code></pre>

<h2 id="advanced-logging-features">Advanced logging features</h2>

<p>If you&rsquo;d like to send log events to a log aggregator service (like logstash, graylog, splunk) of your choice, you may require additional configuration to be performed:</p>

<ul>
<li>ensure that the relevant java libraries along with their dependencies are present in the <code>libs</code> directory, relative to the working directory of the GoCD server or agent process. The working directory is usually <code>/var/lib/go-{server,agent}</code> on linux, and <code>C:\Program Files\Go {Server,Agent}</code> on windows.</li>
<li>configure appenders and encoders in the relevant <code>logback-include.xml</code> file for your agent or server</li>
</ul>

<h3 id="example-logstash-setup">Example logstash setup</h3>

<p>For e.g. to send logs to logstash (using <a href="https://github.com/logstash/logstash-logback-encoder">logstash-logback-encoder</a>) one would need to perform the following:</p>

<ul>
<li>download all logstash-logback-encoder jars and dependencies into <code>libs</code> dir:

<ul>
<li><code>logstash-logback-encoder-4.11.jar</code></li>
<li><code>jackson-databind-2.9.1.jar</code></li>
<li><code>jackson-annotations-2.9.1.jar</code></li>
<li><code>jackson-core-2.9.1.jar</code></li>
</ul></li>
</ul>

<p>Then follow the instructions on the <a href="https://github.com/logstash/logstash-logback-encoder#readme">README</a> to configure your <code>logback-include.xml</code> to setup relevant appenders and encoders:</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;included&gt;

  &lt;!-- see https://github.com/logstash/logstash-logback-encoder for more examples and configuration --&gt;
  &lt;appender name=&quot;stash&quot; class=&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;&gt;
      &lt;destination&gt;127.0.0.1:4560&lt;/destination&gt;
      &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot; /&gt;
  &lt;/appender&gt;

  &lt;root level=&quot;info&quot;&gt;
    &lt;appender-ref ref=&quot;stash&quot; /&gt;
  &lt;/root&gt;
&lt;/included&gt;
</code></pre>

<h2 id="override-existing-logback-xml">Override Existing logback.xml</h2>

<p>If you&rsquo;d like to completely override the packaged <code>logback.xml</code>, create a <code>CONFIG_DIR\logback.xml</code> file. If such a file is present, GoCD will use the loggers and file appender provided in the file for logging. You can read more about logback configuration in the <a href="https://logback.qos.ch/manual/configuration.html">logback configuration documentation</a></p>

<p>The following is a sample <code>logback.xml</code> users can use to override logging for GoCD root logger. The example uses a user defined directory for writing logs.</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;

  &lt;appender name=&quot;CustomFileAppender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
    &lt;file&gt;logs/production_server/gocd-server.log&lt;/file&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;
        %date{ISO8601} %-5level [%thread] %logger{0}:%line - %msg%n
      &lt;/pattern&gt;
    &lt;/encoder&gt;

    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;
      &lt;fileNamePattern&gt;logs/production_server/gocd-server.log.%d{yyyy-MM-dd}.%i.gz&lt;/fileNamePattern&gt;
      &lt;maxFileSize&gt;10 MB&lt;/maxFileSize&gt;
      &lt;maxHistory&gt;50&lt;/maxHistory&gt;
      &lt;totalSizeCap&gt;512 MB&lt;/totalSizeCap&gt;
    &lt;/rollingPolicy&gt;
  &lt;/appender&gt;

  &lt;root level=&quot;WARN&quot;&gt;
    &lt;appender-ref ref=&quot;CustomFileAppender&quot;/&gt;
  &lt;/root&gt;

&lt;/configuration&gt;

</code></pre>

<ul>
<li>Please note while overriding the logging for your GoCD server, redirect all logs to appropriate files in order to avoid any loss of logs.</li>
</ul>

<h3 id="example-gelf-setup">Example gelf setup</h3>

<p>Another example setup using GELF (Graylog Extended Log Format) using <a href="https://github.com/osiegmar/logback-gelf">logback-gelf</a>:</p>

<p>Download <code>logback-gelf-1.1.0.jar</code> and place it in <code>libs</code> directory.
On typical linux server, that can be done with</p>

<pre><code>wget &quot;http://repo1.maven.org/maven2/de/siegmar/logback-gelf/1.1.0/logback-gelf-1.1.0.jar&quot; -O /var/lib/go-server/libs/logback-gelf-1.1.0.jar
</code></pre>

<p>Configure <code>logback-include.xml</code> with any of the gelf appenders as defined on <a href="https://github.com/osiegmar/logback-gelf#example">project documentation</a>:
An example logging over UDP could look like this:</p>

<pre><code class="language-xml">&lt;included&gt;
    &lt;appender name=&quot;GELF&quot; class=&quot;de.siegmar.logbackgelf.GelfUdpAppender&quot;&gt;
        &lt;graylogHost&gt;graylog.mycompany.com&lt;/graylogHost&gt;
        &lt;graylogPort&gt;12201&lt;/graylogPort&gt;
        &lt;layout class=&quot;de.siegmar.logbackgelf.GelfLayout&quot;&gt;
            &lt;includeRawMessage&gt;false&lt;/includeRawMessage&gt;
            &lt;includeMarker&gt;true&lt;/includeMarker&gt;
            &lt;includeMdcData&gt;true&lt;/includeMdcData&gt;
            &lt;includeCallerData&gt;false&lt;/includeCallerData&gt;
            &lt;includeRootCauseData&gt;false&lt;/includeRootCauseData&gt;
            &lt;includeLevelName&gt;false&lt;/includeLevelName&gt;
            &lt;shortPatternLayout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
                &lt;pattern&gt;%m%nopex&lt;/pattern&gt;
            &lt;/shortPatternLayout&gt;
            &lt;fullPatternLayout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
                &lt;pattern&gt;%m&lt;/pattern&gt;
            &lt;/fullPatternLayout&gt;
            &lt;staticField&gt;application:go-server&lt;/staticField&gt;
            &lt;staticField&gt;environment:production&lt;/staticField&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;

    &lt;root&gt;
        &lt;appender-ref ref=&quot;GELF&quot;/&gt;
    &lt;/root&gt;
&lt;/included&gt;
</code></pre>
</article>

      
<div class="align-center book-git-footer justify-end">
  
  
  <div>
    <a href="https://github.com/gocd/new-docs.gocd.org/edit/master/content/advanced_usage/logging.md" target="_blank" rel="noopener">
      <img src="../svg/code-fork.svg" /> Edit this page
    </a>
  </div>
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#logging">Logging</a>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#log-location">Log location</a></li>
<li><a href="#gocd-server">GoCD Server</a></li>
<li><a href="#gocd-agent">GoCD Agent</a></li>
<li><a href="#log-configuration-syntax">Log configuration syntax</a></li>
<li><a href="#example-enable-web-request-logs">Example: Enable web-request logs</a></li>
<li><a href="#advanced-logging-features">Advanced logging features</a>
<ul>
<li><a href="#example-logstash-setup">Example logstash setup</a></li>
</ul></li>
<li><a href="#override-existing-logback-xml">Override Existing logback.xml</a>
<ul>
<li><a href="#example-gelf-setup">Example gelf setup</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
