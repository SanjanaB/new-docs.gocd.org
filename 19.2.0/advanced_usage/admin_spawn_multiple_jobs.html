<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spawn multiple instances of a Job | GoCD User Documentation</title>

<meta name="description" content="Run a job on a group of agents"/>
<meta name="keywords" content="[GoCD jobs, configure XML, configure Admin UI, test parallelization]"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//advanced_usage/admin_spawn_multiple_jobs.html"/>
<script async src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet"/>
<link rel="stylesheet" href="../normalize.min.css"/>

<link rel="stylesheet" href="../book.min.87a2ae978f4eef197028ff1dc9c46e406d1b1133dcefddfe618d4d6d73fc362e.css"/>
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">



    <ul>
<li><a href="../"><strong>Introduction</strong></a></li>
<li><a href="../navigation.html"><strong>GoCD Tour</strong></a>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>
<li><a href="../configuration.html"><strong>Configuration</strong></a>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>
<li><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>
<li><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>
<li><a href="../beta.html"><strong>Beta features</strong></a>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Spawn multiple instances of a Job</strong>
</header>

      
<article class="markdown">

<h2 id="run-a-job-on-a-group-of-agents">Run a Job on a group of Agents</h2>

<p>Sometimes there is a particular job that you may wish to run on all agents in an environment, or in all agents that match a certain resource tag. For example you may want to run a system update on all linux agents, or install a new piece of software.</p>

<p>GoCD will run the Job on all agents that match the environment and resources specified in the job.</p>

<p>If an agent is missing or lost contact, a job will be scheduled. When the agent comes back on line, the job will be re-scheduled.</p>

<p>Jobs are given a unique name based on the name of the job in the configuration file. So for example, if the job is called &lsquo;deploy&rsquo; and you have two agents, you would see jobs like &lsquo;deploy-runOnAll-1&rsquo; and &lsquo;deploy-runOnAll-2&rsquo;.</p>

<h3 id="configure-through-the-admin-ui">Configure through the Admin UI</h3>

<p>To enable run on all agents for a job, navigate to the Job settings page in the job configuration</p>

<p><img src="../images/runonall_job.png" alt="" /></p>

<h3 id="configure-through-the-config-xml">Configure through the Config XML</h3>

<p>To specify that a job should run on all agents, add the attribute</p>

<pre><code>runOnAllAgents=&quot;true&quot;
</code></pre>

<p>to the job&rsquo;s definition (see configuration reference for <a href="../configuration/configuration_reference.html#job"><code>&lt;job&gt;</code></a>)</p>

<pre><code class="language-xml">&lt;job name=&quot;deploy&quot; runOnAllAgents=&quot;true&quot;&gt;
    ...
&lt;/job&gt;
</code></pre>

<h2 id="run-x-instances-of-a-job">Run &lsquo;X&rsquo; instances of a Job</h2>

<p>If you want to run multiple instances of the same job configuration you do not have to maintain multiple copies of same job config. You can specify how many instances of job you need &amp; Go will take care of spawing the required number of job instances during scheduling.</p>

<p>This feature is particularly useful for test parallelization. It enables Go users to integrate with other test parallelization tools like <a href="http://test-load-balancer.github.io">TLB</a> etc. to achieve distributed test execution with minimal configuration.</p>

<p>Jobs are given a unique name based on the name of the job in the configuration file. Example, if the job is called &lsquo;test&rsquo; and you have set runInstanceCount to 2, you would see jobs like &lsquo;test-runInstance-1&rsquo; and &lsquo;test-runInstance-2&rsquo;. Go provides index of job (GO_JOB_RUN_INDEX) &amp; total count of jobs (GO_JOB_RUN_COUNT) as environment variables to each Job.</p>

<h3 id="configure-through-the-admin-ui-1">Configure through the Admin UI</h3>

<p>To run &lsquo;x&rsquo; instances of a job, navigate to the Job settings page in the job configuration</p>

<p><img src="../images/runxinstance_job.png" alt="" /></p>

<h3 id="configure-through-the-config-xml-1">Configure through the Config XML</h3>

<p>To specify that &lsquo;x&rsquo; instances of a job should run, add the attribute</p>

<pre><code>runInstanceCount=&quot;5&quot;
</code></pre>

<p>to the job&rsquo;s definition (see configuration reference for <a href="../configuration/configuration_reference.html#job"><code>&lt;job&gt;</code></a>)</p>

<pre><code class="language-xml">&lt;job name=&quot;test&quot; runInstanceCount=&quot;5&quot;&gt;
    ...
&lt;/job&gt;
</code></pre>

<h4 id="also-see">Also See&hellip;</h4>

<ul>
<li><a href="../faq/job_rerun.html">Re-running job(s)</a></li>
</ul>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#run-a-job-on-a-group-of-agents">Run a Job on a group of Agents</a>
<ul>
<li><a href="#configure-through-the-admin-ui">Configure through the Admin UI</a></li>
<li><a href="#configure-through-the-config-xml">Configure through the Config XML</a></li>
</ul></li>
<li><a href="#run-x-instances-of-a-job">Run &lsquo;X&rsquo; instances of a Job</a>
<ul>
<li><a href="#configure-through-the-admin-ui-1">Configure through the Admin UI</a></li>
<li><a href="#configure-through-the-config-xml-1">Configure through the Config XML</a>
<ul>
<li><a href="#also-see">Also See&hellip;</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
