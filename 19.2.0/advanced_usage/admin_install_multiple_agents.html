<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiple Agents on One Machine | GoCD User Documentation</title>

<meta name="description" content="Install multiple GoCD agents on a single machine"/>
<meta name="keywords" content="[agents, GoCD installers, windows, Mac OSX, Linux]"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//advanced_usage/admin_install_multiple_agents.html"/>
<script async src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet"/>
<link rel="stylesheet" href="../normalize.min.css"/>

<link rel="stylesheet" href="../book.min.87a2ae978f4eef197028ff1dc9c46e406d1b1133dcefddfe618d4d6d73fc362e.css"/>
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">



    <ul>
<li><a href="../"><strong>Introduction</strong></a></li>
<li><a href="../navigation.html"><strong>GoCD Tour</strong></a>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>
<li><a href="../configuration.html"><strong>Configuration</strong></a>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>
<li><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>
<li><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>
<li><a href="../beta.html"><strong>Beta features</strong></a>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Multiple Agents on One Machine</strong>
</header>

      
<article class="markdown">

<h1 id="install-multiple-agents-on-the-same-machine">Install multiple agents on the same machine</h1>

<p>In order to fully utilize your hardware, it is often useful to install multiple agents on a single machine.</p>

<p>Currently GoCD installers do not support this out of the box. The following sections describe how this can be done manually</p>

<h2 id="windows">Windows</h2>

<p>On Windows, multiple GoCD agents can be run in two ways - as Windows service or as a Windows command</p>

<h3 id="running-as-windows-service">Running as Windows service</h3>

<ul>
<li><a href="../installation/installing_go_agent.html">Install your first agent with the installer to the default location</a></li>
<li>Copy the installation folder (&ldquo;C:\Program Files\Go Agent&rdquo;) to &ldquo;C:\Program Files\Go Agent 2&rdquo;</li>
<li>Delete the file C:\Program Files\Go Agent 2\config\guid.txt</li>
<li>Delete the file C:\Program Files\Go Agent 2\.agent-bootstrapper.running</li>
<li>Edit <strong>wrapper-agent.conf</strong> file to customise information related to <strong>Go Agent 2</strong>
Just after the line #include ../conf/wrapper-license.conf, add

<ul>
<li>set.GO_AGENT_DIR=C:\Program Files\Go Agent 2</li>
<li>set.GO_AGENT_JAVA_HOME=%GO_AGENT_DIR%\jre</li>
</ul></li>
<li>Run the following command
<code>
sc create GoAgent2 binPath= &quot;\&quot;C:\Program Files\Go Agent 2\cruisewrapper.exe\&quot; -s \&quot;C:\Program Files\Go Agent 2\config\wrapper-agent.conf\&quot;&quot;
</code></li>
<li>Start &ldquo;GoAgent2&rdquo; service</li>
</ul>

<h3 id="running-as-windows-command">Running as Windows command</h3>

<ul>
<li>Follow the instructions to <a href="../installation/install/agent/zip.html">run Go without installation on Windows</a></li>
<li>Do the same steps on a different folder to set up another agent</li>
</ul>

<blockquote>
<p>You should use a VNC application (such as <a href="http://www.tightvnc.com">TightVNC</a>) to keep windows user logged in. If the user logs out or the computer restarts, the agents will shutdown.</p>
</blockquote>

<h2 id="mac-osx">Mac OSX</h2>

<ul>
<li><a href="../installation/installing_go_agent.html">Install your first agent with the installer</a></li>
<li>Assuming your first agent in at /Applications/Go Agent.app, copy that to another location, say
/Applications/Go Agent 2.app. Once you do that, you can start the application like this:</li>
</ul>

<pre><code>  GO_APPLICATION_NAME=&quot;Go Agent 2&quot; open /Applications/Go\ Agent\ 2.app
</code></pre>

<p>The logs and other files related to the second agent should be available at
  &ldquo;<user-home>/Library/Application Support/Go Agent 2&rdquo; and the icon in the dock
  will be called &ldquo;Go Agent 2&rdquo; as well.</p>

<p>It is also possible to edit the file /Applications/Go\ Agent\ 2.app/Contents/Info.plist
  to change the <code>CFBundleName</code> property. However, that is not recommended,
  since it invalidates the signature of the application package, and could cause
  Apple Gatekeeper to warn you that the new agent is an invalid application.</p>

<h2 id="linux-rpm-and-deb">Linux (RPM and DEB)</h2>

<ul>
<li><a href="../installation/installing_go_agent.html">Install your first agent with the installer</a></li>
<li>To create a second agent on the same host, run this as root:
<code>
cp /etc/init.d/go-agent /etc/init.d/go-agent-1
sed -i 's/# Provides: go-agent$/# Provides: go-agent-1/g' /etc/init.d/go-agent-1
ln -s /usr/share/go-agent /usr/share/go-agent-1
cp -p /etc/default/go-agent /etc/default/go-agent-1
mkdir /var/{lib,log}/go-agent-1
chown go:go /var/{lib,log}/go-agent-1
</code></li>

<li><p>To enable starting the go-agent service during system boot:</p>

<ul>
<li>on Debian:
<code>
insserv go-agent-1
</code></li>
<li>on Ubuntu:
<code>
update-rc.d go-agent-1 defaults
</code></li>
<li>on Centos and Redhat:
<code>
chkconfig go-agent-1 on
</code></li>
</ul></li>

<li><p>You can now start or stop the second agent using /etc/init.d/go-agent-1
(passing it the start or stop) arguments as usual. Logs will be written to
/var/log/go-agent-1/.</p></li>

<li><p>Repeat this process for more agents. Just change the suffix &ldquo;1&rdquo; to &ldquo;2&rdquo; and so
on.</p></li>
</ul>

<h2 id="linux-non-rpm-non-deb-and-other-unixes">Linux (non-RPM, non-DEB and other UNIXes)</h2>

<ul>
<li><a href="../installation/installing_go_agent.html">Install your first agent with the installer</a></li>
<li>Make an empty folder called /var/lib/go-agent-2</li>
<li>In this folder, run
<code>
java -jar /usr/share/go-agent/agent-bootstrapper.jar -serverUrl https://127.0.0.1/go &amp;
</code></li>
</ul>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#install-multiple-agents-on-the-same-machine">Install multiple agents on the same machine</a>
<ul>
<li><a href="#windows">Windows</a>
<ul>
<li><a href="#running-as-windows-service">Running as Windows service</a></li>
<li><a href="#running-as-windows-command">Running as Windows command</a></li>
</ul></li>
<li><a href="#mac-osx">Mac OSX</a></li>
<li><a href="#linux-rpm-and-deb">Linux (RPM and DEB)</a></li>
<li><a href="#linux-non-rpm-non-deb-and-other-unixes">Linux (non-RPM, non-DEB and other UNIXes)</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
