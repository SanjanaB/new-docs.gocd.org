<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Backup GoCD Server | GoCD User Documentation</title>

<meta name="description" content="Use GoCD&#39;s administration interface or API to backup and restore GoCD server"/>
<meta name="keywords" content="[GoCD server, GoCD backup, administration interface, backup API]"/>
<link rel="canonical" href="https://gocd.github.io/new-docs.gocd.org/current//advanced_usage/one_click_backup.html"/>
<script src="../javascripts/_gdpr-banner.js" type="text/javascript"></script>
<link rel="stylesheet" href="../normalize.min.css"/>
<link rel="stylesheet" href="../stylesheets/website.css"/>

<link rel="stylesheet" href="../book.min.e25e764c26de4855dda7357af53b40e8cc1080e9a7094022f82afec78ea83b5a.css"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48357651-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<a href="https://www.gocd.org"> <img src="../svg/product_ui_logo_go.svg" class="icon" /></a>


    



<style>
  nav ul a[href$="\2f advanced_usage\2fone_click_backup.html"] {
  color: #004ed0;
  }
</style>

<ul>
<li><a href="https://www.gocd.org/"><strong>Back to GoCD.org</strong></a></li>

<li><p><a href="https://github.com/gocd/docs.go.cd/"><strong>Contribute</strong></a></p>

<hr /></li>

<li><p><a href="../"><strong>Introduction</strong></a></p></li>

<li><p><a href="../introduction.html"><strong>Concepts In GoCD</strong></a></p>

<ul>
<li><a href="../introduction/concepts_in_go.html">Concepts In GoCD</a></li>
</ul></li>

<li><p><a href="../navigation.html"><strong>GoCD Tour</strong></a></p>

<ul>
<li><a href="../navigation/pipelines_dashboard_page.html">Pipeline Dashboard</a></li>
<li><a href="../navigation/agents_page.html">Agents</a></li>
<li><a href="../navigation/agent_details.html">Agent Details</a></li>
<li><a href="../navigation/pipeline_activity_page.html">Pipeline Activity</a></li>
<li><a href="../navigation/stage_details_page.html">Stage Details</a></li>
<li><a href="../navigation/job_details_page.html">Job Details</a></li>
<li><a href="../navigation/administration_page.html">Administration</a></li>
<li><a href="../navigation/server_details_page.html">Server Details</a></li>
<li><a href="../navigation/environments_page.html">Environments</a></li>
<li><a href="../navigation/value_stream_map.html">Value Stream Map</a></li>
</ul></li>

<li><p><a href="../installation.html"><strong>Installing GoCD</strong></a></p>

<ul>
<li><a href="../installation/system_requirements.html">System requirements</a></li>
<li><a href="../installation/installing_go_server.html">Installing GoCD Server</a>

<ul>
<li><a href="../installation/install/server/linux.html">Linux</a></li>
<li><a href="../installation/install/server/windows.html">Windows</a></li>
<li><a href="../installation/install/server/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/server/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/installing_go_agent.html">Installing GoCD Agent</a>

<ul>
<li><a href="../installation/install/agent/linux.html">Linux</a></li>
<li><a href="../installation/install/agent/windows.html">Windows</a></li>
<li><a href="../installation/install/agent/osx.html">Mac OS X</a></li>
<li><a href="../installation/install/agent/zip.html">Generic Zip</a></li>
</ul></li>
<li><a href="../installation/upgrading_go.html">Upgrading GoCD</a></li>
<li><a href="../installation/configuring_server_details.html">Configuring Server Details</a></li>
<li><a href="../installation/configure-reverse-proxy.html">Configure a Reverse Proxy</a></li>
<li><a href="../installation/configure-agent-proxy.html">Configure an agent with proxy</a></li>
<li><a href="../installation/ssl_tls_config.html">Configuring SSL/TLS</a>

<ul>
<li><a href="../installation/ssl_tls/setting_up_ciphers.html">Customizing Ciphers</a></li>
<li><a href="../installation/ssl_tls/custom_server_certificate.html">Change SSL Certificates</a></li>
<li><a href="../installation/ssl_tls/end_to_end_transport_security.html">End to end transport security</a></li>
<li><a href="../installation/ssl_tls/configuring_hsts_header.html">Configuring HSTS Header</a></li>
</ul></li>
<li><a href="../installation/performance_tuning.html">Performance Tuning</a></li>
<li><a href="../installation/hardware_specifications.html">Hardware Specifications</a></li>
<li><a href="../installation/troubleshooting.html">Troubleshooting</a></li>
</ul></li>

<li><p><a href="../configuration.html"><strong>Configuration</strong></a></p>

<ul>
<li><a href="../configuration/quick_pipeline_setup.html">Setup a New Pipeline</a></li>
<li><a href="../configuration/managing_pipelines.html">Managing Pipelines</a></li>
<li><a href="../configuration/managing_dependencies.html">Managing Dependencies</a></li>
<li><a href="../configuration/managing_a_build_cloud.html">Managing Agents</a></li>
<li><a href="../configuration/managing_environments.html">Managing Environments</a></li>
<li><a href="../configuration/build_labelling.html">Pipeline Labelling</a></li>
<li><a href="../configuration/pipeline_scheduling.html">Pipeline Scheduling</a></li>
<li><a href="../configuration/admin_use_parameters_in_configuration.html">Parameterize a Pipeline</a></li>
<li><a href="../configuration/admin_use_custom_pipeline_label.html">Customize a Pipeline Label</a></li>
<li><a href="../configuration/admin_clone_pipeline.html">Clone a Pipeline</a></li>
<li><a href="../configuration/admin_lock_pipelines.html">Lock a Pipeline</a></li>
<li><a href="../configuration/admin_add_material.html">Add Material to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_stage.html">Add Stage to Existing Pipeline</a></li>
<li><a href="../configuration/admin_add_job.html">Add job to Existing Stage</a></li>
<li><a href="../configuration/admin_add_task.html">Add task to Existing Job</a></li>
<li><a href="../configuration/pipeline_templates.html">Pipeline Templates</a></li>
<li><a href="../configuration/elastic_agents.html">Elastic Agents</a></li>
<li><a href="../configuration/dev_choose_when_stage_runs.html">Choose When a Stage Runs</a></li>
<li><a href="../configuration/admin_timer.html">Timer Trigger</a></li>
<li><a href="../configuration/job_timeout.html">Job Timeout</a></li>
<li><a href="../configuration/managing_users.html">Managing Users</a></li>
<li><a href="../configuration/dev_authentication.html">Authentication</a></li>
<li><a href="../configuration/dev_authorization.html">Authorizing Users</a></li>
<li><a href="../configuration/delegating_group_administration.html">Delegating Group Administration</a></li>
<li><a href="../configuration/pipeline_group_admin_config.html">Pipeline Group Administration</a></li>
<li><a href="../configuration/dev_upload_test_report.html">Publish Reports and Artifacts</a></li>
<li><a href="../configuration/managing_artifacts_and_reports.html">Managing Artifacts and Reports</a></li>
<li><a href="../configuration/delete_artifacts.html">Auto Delete Artifacts</a></li>
<li><a href="../configuration/ui_testing.html">UI Testing</a></li>
<li><a href="../configuration/admin_mailhost_info.html">Mailhost Information</a></li>
<li><a href="../configuration/dev_notifications.html">Notifications</a></li>
<li><a href="../configuration/tfs_config.html">TFS Material configuration</a></li>
<li><a href="../configuration/configuration_reference.html">Reference</a></li>
<li><a href="../configuration/schema.html">Schema</a></li>
</ul></li>

<li><p><a href="../advanced_usage.html"><strong>Advanced Usage</strong></a></p>

<ul>
<li><a href="../advanced_usage/pipelines_as_code.html">Pipelines as code</a></li>
<li><a href="../advanced_usage/agent_auto_register.html">Auto Register a Remote Agent</a></li>
<li><a href="../advanced_usage/admin_spawn_multiple_jobs.html">Spawn multiple instances of a Job</a></li>
<li><a href="../advanced_usage/admin_install_multiple_agents.html">Multiple Agents on One Machine</a></li>
<li><a href="../advanced_usage/dev_clean_up_when_cancel.html">Clean on Task Cancel</a></li>
<li><a href="../advanced_usage/dev_conditional_task_execution.html">Conditional Task Execution</a></li>
<li><a href="../advanced_usage/trigger_with_options.html">Trigger With Options</a></li>
<li><a href="../advanced_usage/fan_in.html">Fan In</a></li>
<li><a href="../advanced_usage/properties.html">Properties</a></li>
<li><a href="../advanced_usage/logging.html">Logging</a></li>
<li><a href="../advanced_usage/compare_pipelines.html">Compare Builds</a></li>
<li><a href="../advanced_usage/stage_duration_chart.html">Graphs</a></li>
<li><a href="../advanced_usage/command_repository.html">Command Repository</a></li>
<li><a href="../advanced_usage/one_click_backup.html">Backup GoCD Server</a></li>
<li><a href="../advanced_usage/cron_backup.html">Timer Based GoCD Server Backup</a></li>
<li><a href="../advanced_usage/config_repo.html">Config Repository</a></li>
<li><a href="../advanced_usage/other_config_options.html">Other Config Options</a></li>
<li><a href="../advanced_usage/agent-health-check-api.html">Agent Health Check API</a></li>
<li><a href="../advanced_usage/maintenance_mode.html">Maintenance Mode</a><br /></li>
</ul></li>

<li><p><a href="../integration.html"><strong>Integrating GoCD With Other Tools</strong></a></p></li>

<li><p><a href="../extension_points.html"><strong>Extension Points Of GoCD</strong></a></p>

<ul>
<li><a href="../extension_points/plugin_user_guide.html">Plugin User Guide</a></li>
<li><a href="../extension_points/package_repository_extension.html">Package Repository Extension</a></li>
<li><a href="../extension_points/yum_repository_poller.html">Yum Repository Poller</a></li>
<li><a href="../extension_points/scm_extension.html">SCM Extension</a></li>
<li><a href="../extension_points/task_extension.html">Task Extension</a>
<!---  - [Notification Extension](/extension_points/notification_extension.html)--></li>
<li><a href="../extension_points/configrepo_extension.html">Configuration repository Extension</a></li>
</ul></li>

<li><p><a href="../gocd_on_kubernetes.html"><strong>GoCD on Kubernetes</strong></a></p>

<ul>
<li><a href="../gocd_on_kubernetes/introduction.html">Introduction</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup_and_configuration.html">Setup and configuration</a>

<ul>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/setup.html">Setup</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_cluster.html">Configure your Kubernetes Cluster</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/helm_install.html">Install the GoCD Helm chart</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline.html">Designing a CD Pipeline</a>

<ul>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_build_pipeline.html">Create a pipeline to build application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_test_pipeline.html">Create a pipeline to test the built application</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/creating_a_deploy_pipeline.html">Create a pipeline to deploy on Kubernetes</a></li>
<li><a href="../gocd_on_kubernetes/designing_a_cd_pipeline/docker_workflows.html">Docker workflows</a></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/configure_k8s_ea_plugin.html">Configure the Kubernetes Elastic Agent plugin</a></li>
</ul></li>
<li><a href="../gocd_on_kubernetes/gocd_helm_chart/troubleshooting.html">Troubleshooting</a></li>
</ul></li>

<li><p><a href="../faq.html"><strong>FAQ/Troubleshooting</strong></a></p>

<ul>
<li><a href="../faq/ordering_of_pipelines.html">Ordering of Pipelines</a></li>
<li><a href="../faq/stage_old_config.html">Historical Configuration</a></li>
<li><a href="../faq/concurrent_config_modifications.html">Concurrent Modifications to Config</a></li>
<li><a href="../faq/dev_understand_why_build_broken.html">Why the Build is Broken?</a></li>
<li><a href="../faq/dev_see_artifact_as_tab.html">See artifacts as sub-tabs</a></li>
<li><a href="../faq/dev_save_properties.html">Save Properties for a Build</a></li>
<li><a href="../faq/environment_variables.html">Using Environment variables</a></li>
<li><a href="../faq/rm_deploy_to_environment.html">Deploy to an environment</a></li>
<li><a href="../faq/tester_what_has_changed.html">See changes in new binary</a></li>
<li><a href="../faq/dependency_management.html">Run Tests against new Builds</a></li>
<li><a href="../faq/rm_what_is_deployed.html">Check What&rsquo;s Deployed</a></li>
<li><a href="../faq/deploy_a_specific_build_to_an_environment.html">Deploy a Specific Build</a></li>
<li><a href="../faq/agent_guid_issue.html">Clone/Copy an Existing Agents</a></li>
<li><a href="../faq/job_rerun.html">How do I re-run jobs?</a></li>
<li><a href="../faq/material_update_hung.html">Go unable to poll for changes</a></li>
<li><a href="../faq/artifact_integrity.html">Artifact integrity verification</a></li>
<li><a href="../faq/notifications_page.html">Email Notifications</a></li>
<li><a href="../faq/admin_out_of_disk_space.html">Running out of Disk Space</a></li>
<li><a href="../faq/docker_container_ssh_keys.html">Configure SSH Keys for dockerized GoCD</a></li>
</ul></li>

<li><p><a href="../beta.html"><strong>Beta features</strong></a></p>

<ul>
<li><a href="../beta/comment_on_pipeline_run.html">Comment on a pipeline run</a><br /></li>
</ul></li>

<li><p><a href="../release_history.html"><strong>Release History</strong></a></p>

<ul>
<li><a href="../release_history/whats_new_in_go.html">What&rsquo;s New in Go</a><br /></li>
</ul></li>
</ul>




</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="../svg/menu.svg" />
  </label>
  <strong>Backup GoCD Server</strong>
</header>

      
<article class="markdown">
  <p>

<h1 id="backup-gocd-server">Backup GoCD Server</h1>

<p>You can use GoCD&rsquo;s administration interface to perform an One-Click Backup of Go. You can also perform the backup <a href="https://api.gocd.org/#backups">using the API</a>.</p>

<h2 id="steps-to-initiate-backup">Steps to initiate backup</h2>

<ul>
<li>On the GoCD Administration page, click on the Backup tab.
<img src="../images/backup_tab.png" alt="" /></li>
<li>Click on &ldquo;BACKUP&rdquo;
<img src="../images/backup_button.png" alt="" /></li>
<li>Click &ldquo;PROCEED&rdquo;
<img src="../images/backup_proceed.png" alt="" />
&gt;GoCD will be unusable during the backup process.</li>
<li>Backup time is proportional to the database and configuration size. We suggest you backup GoCD when the GoCD Server is idle. Users who are logged into the GoCD Dashboard will be redirected to a maintenance page during the backup. On backup completion they will be redirected to the page they were on.</li>
<li>If you are using PostgreSQL Addon please refer to our documentation <a href="https://extensions-docs.gocd.org/postgresql/current/backup-restore-database">here</a> for back and restore process.</li>
</ul>

<h3 id="what-is-backed-up">What is backed up?</h3>

<p>The backup will be performed into the <strong>{ARTIFACT_REPOSITORY_LOCATION}/serverBackups</strong> directory. {ARTIFACT_REPOSITORY_LOCATION} for your server can be found as mentioned <a href="../installation/configuring_server_details.html#artifact-repository-configuration">here</a>.</p>

<p>The backup directory will be named <strong>backup_{TIMESTAMP}</strong> where the <strong>{TIMESTAMP}</strong> is the time when the backup was initiated.</p>

<ul>
<li>Database - This is in a zip called <strong>db.zip</strong> . The zip has a single DB file called <strong>cruise.h2.db</strong></li>
<li>Configuration - This is in a zip called <strong>config-dir.zip</strong> . This zip contains the XML configuration, Jetty server configuration, Keystores and all other GoCD&rsquo;s internal configurations.</li>
<li>XML Configuration Version Repo - This is in a zip called <strong>config-repo.zip</strong> . This zip contains the Git repository of the XML configuration file.</li>
<li>GoCD version - This is a file called <strong>version.txt</strong> . This file contains the version of the GoCD server when the backup was initiated</li>
</ul>

<h3 id="what-is-not-backed-up">What is not backed up?</h3>

<blockquote>
<p>Please refer to the <a href="../installation/installing_go_server.html#location-of-files-after-installation-of-go-server">this</a> page to see what the {SERVER_INSTALLATION_DIR} location is on different platforms.</p>
</blockquote>

<p>The following are not backed up as a part of the GoCD backup process. Please ensure that these are manually backed up regularly.</p>

<ul>
<li>Artifacts - Please refer to <a href="../faq/admin_out_of_disk_space.html#move-the-artifact-repository-to-a-new-larger-drive">this section</a> to find out how to deal with artifacts</li>
<li>Test Reporting Data - This is found at the location <strong>{SERVER_INSTALLATION_DIR}/db/shine</strong> . This contains the data used in the Failed Test History reporting</li>
<li>Environment Variables - On Windows the environment variables that might be set for the user and on Linux the changes made to <strong>/etc/default/go-server</strong> are not backed up.</li>
<li>Log Files</li>
<li>Plugins - These are found at <strong>{SERVER_INSTALLATION_DIR}/plugins/</strong>. This contains both the external and bundled plugins.</li>
<li>Addons - These are found at <strong>{SERVER_INSTALLATION_DIR}/addons/</strong>. This contains installed addons.</li>
</ul>

<h4 id="strategy-to-backup-artifacts-and-test-reporting-data">Strategy to backup Artifacts and Test Reporting Data</h4>

<p>Artifacts and the Test Reporting Data keep getting new files and directories added to them. So, it is a good idea to use <strong>rsync</strong> to copy the contents of these two into a backup location.</p>

<p><em>For Instance:</em> Lets say you have a copy of all the files till 12-02-2012 in a location. On 20-02-2012, you can do something like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rsync -avzP <span style="color:#f92672">{</span>ARTIFACT_LOCATION<span style="color:#f92672">}</span> <span style="color:#f92672">{</span>BACKUP_LOCATION<span style="color:#f92672">}</span></code></pre></div>
<p>This makes sure that only the files and directories that got newly added will be synced to the {BACKUP_LOCATION} and not the entire contents.</p>

<h3 id="restoring-gocd-using-backup">Restoring GoCD using backup</h3>

<blockquote>
<p>Please refer to the <a href="../installation/installing_go_server.html#location-of-files-after-installation-of-go-server">this</a> page to see what the {SERVER_INSTALLATION_DIR} location is on different platforms.</p>
</blockquote>

<p>The restoration process is not automated and needs to be done manually. Please refer to the previous sections about the contents of the backup.</p>

<h4 id="steps-to-restore">Steps to restore</h4>

<ul>
<li>In order to restore the GoCD server from a backup, the server must first be stopped. Make sure the process is completely dead before starting the restoration.</li>

<li><p>Choose the backup directory that you want to restore from.</p>

<blockquote>
<p><strong>You cannot restore from a backup whose version is bigger than the version of the GoCD server being used.</strong><br>
<em>For example:</em> If the backup is from version 12.3 and the server installation is of version 12.2, the restoration might not work. You can check the version of the backup from the <strong>version.txt</strong> file.</p>
</blockquote></li>

<li><p>You might want to keep a copy of all the files and directories that are involved in restoration. This will help in troubleshooting if there was a problem. Following this, make sure all the destination directories mentioned in the following steps are empty.<br>
<em>For example:</em> Before restoring the Database, make sure the <strong>{SERVER_INSTALLATION_DIR}/db/h2db</strong> is backed up and the directory is emptied.</p></li>

<li><p>Database - Unzip the <strong>db.zip</strong> found in the backup directory. Unzip will create a file called <strong>cruise.h2.db</strong> . Copy this file to the directory <strong>{SERVER_INSTALLATION_DIR}/db/h2db</strong> .</p></li>

<li><p>Configuration - Unzip the <strong>config-dir.zip</strong> into a temp directory. Copy all the files from this directory to <strong>{SERVER_INSTALLATION_DIR}/config</strong> directory on Windows and Mac or <strong>/etc/go</strong> on Linux.</p></li>

<li><p>Configuration History - Unzip the <strong>config-repo.zip</strong> into temp directory. Recursively copy all the contents from this directory to <strong>{SERVER_INSTALLATION_DIR}/db/config.git</strong> .</p></li>

<li><p>Make sure the ownership of all the files that are restored are the same as the user running the Go server.<br>
<em>For example:</em> Make sure you run a &ldquo;chown -R go:go {SERVER_INSTALLATION_DIR}/db/h2db&rdquo; after Database restoration.</p></li>

<li><p>Start the GoCD server</p></li>
</ul>
</p>
</article>

      
<div class="align-center book-git-footer justify-end">
  
  
  <div>
    <a href="https://github.com/gocd/new-docs.gocd.org/edit/master/content/advanced_usage/one_click_backup.md" target="_blank" rel="noopener">
      <img src="../svg/code-fork.svg" /> Edit this page
    </a>
  </div>
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#backup-gocd-server">Backup GoCD Server</a>
<ul>
<li><a href="#steps-to-initiate-backup">Steps to initiate backup</a>
<ul>
<li><a href="#what-is-backed-up">What is backed up?</a></li>
<li><a href="#what-is-not-backed-up">What is not backed up?</a>
<ul>
<li><a href="#strategy-to-backup-artifacts-and-test-reporting-data">Strategy to backup Artifacts and Test Reporting Data</a></li>
</ul></li>
<li><a href="#restoring-gocd-using-backup">Restoring GoCD using backup</a>
<ul>
<li><a href="#steps-to-restore">Steps to restore</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-48357651-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
